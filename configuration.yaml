homeassistant:
  # Name of the location where Home Assistant is running
  name: Catingham Palace
  # Location required to calculate the time the sun rises and sets
  latitude: !secret latitude
  longitude: !secret longitude
  # Impacts weather/sunrise data (altitude above sea level in meters)
  elevation: !secret elevation
  # metric for Metric, imperial for Imperial
  unit_system: metric
  # Pick yours from here: http://en.wikipedia.org/wiki/List_of_tz_database_time_zones
  time_zone: Europe/Rome
  
  customize:
    switch.driveway_lights:
      icon: mdi:lightbulb
    switch.driveway_gate:
      icon: mdi:gate
    switch.driveway_door:
      icon: mdi:lock
    switch.stair_front_door:
      icon: mdi:stairs
    sensor.entryway_thermostat_humidity:
      icon: mdi:water-percent
    sensor.entryway_thermostat_hvac_state:
      hidden: true
    binary_sensor.entryway_thermostat_fan:
      hidden: true
    binary_sensor.entryway_thermostat_has_leaf:
      hidden: true
    binary_sensor.entryway_thermostat_is_locked:
      hidden: true
    binary_sensor.entryway_thermostat_is_using_emergency_heat:
      hidden: true
    binary_sensor.entryway_thermostat_online:
      hidden: true
    binary_sensor.living_room_camera_online:
      hidden: true
    sensor.entryway_thermostat_target:
      hidden: true
    sensor.entryway_thermostat_operation_mode:
      hidden: true
    climate.entryway:
      friendly_name: Nest
    binary_sensor.rubens_bed:
      icon: mdi:hotel
    binary_sensor.valentina_bed:
      icon: mdi:hotel

    binary_sensor.living_room_camera_person_detected:
      icon: mdi:walk
    binary_sensor.living_room_camera_motion_detected:
      icon: mdi:cat
    binary_sensor.living_room_camera_sound_detected:
      icon: mdi:bullhorn

    automation.leave_cat_passage_living_room:
      friendly_name: Leave cat passage
      icon: mdi:cat
    automation.all_roller_shutter_down:
      friendly_name: All the way down
    automation.all_roller_shutter_up:
      friendly_name: All the way up


# Show links to resources in log and frontend
#introduction:

# Enables the frontend
frontend:

# Enables configuration UI
config:

http:
  # Uncomment this to add a password (recommended!)
  api_password: !secret http_api_password
  # Uncomment this if you are using SSL or running in Docker etc
  base_url: !secret http_base_url
  ssl_certificate: !secret http_ssl_certificate
  ssl_key: !secret http_ssl_key

# Checks for available updates
# Note: This component will send some information about your system to
# the developers to assist with development of Home Assistant.
# For more information, please see:
# https://home-assistant.io/blog/2016/10/25/explaining-the-updater/
updater:

# Discover some devices automatically
discovery:
  ignore:
    - apple_tv

# Allows you to issue voice commands from the frontend in enabled browsers
conversation:

# Enables support for tracking state changes over time.
history:

# View all events in a logbook
logbook:

# Track the sun
sun:

# Weather Prediction
sensor:
  platform: yr

# Text to speech
tts:
  platform: google




mqtt:
  broker: !secret mqtt_broker
  port: !secret mqtt_port
  client_id: lamp1
  username: !secret mqtt_username
  password: !secret mqtt_password

nest:
  client_id: !secret nest_client_id
  client_secret: !secret nest_client_secret

switch:
  - platform: mqtt
    name: "Driveway Gate"
    command_topic: "catingham_palace/driveway/gate/state"
    state_topic: "catingham_palace/driveway/gate/state"
    payload_on: "OPEN"
    payload_off: "CLOSED"
    qos: 1
  - platform: mqtt
    name: "Driveway Door"
    command_topic: "catingham_palace/driveway/door/state"
    state_topic: "catingham_palace/driveway/door/state"
    payload_on: "OPEN"
    payload_off: "CLOSED"
    qos: 1
  - platform: mqtt
    name: "Stair Front door"
    command_topic: "catingham_palace/stair/front_door/state"
    state_topic: "catingham_palace/stair/front_door/state"
    payload_on: "OPEN"
    payload_off: "CLOSED"
    qos: 1
  - platform: mqtt
    name: "Driveway Lights"
    command_topic: "catingham_palace/driveway/lights/state"
    state_topic: "catingham_palace/driveway/lights/state"
    qos: 1
 
#device_tracker:
#  - platform: nmap_tracker
#    hosts: 192.168.0.1/24
#    home_interval: 300
#    track_new_devices: false
#  - platform: owntracks
   

ifttt:
  key: !secret ifttt_key

notify:
  - name: CatinghamPalaceBot
    platform: telegram
    #chat_id: !secret telegram_rubens_chat
    chat_id: !secret telegram_catingham_palace_group

telegram_bot:
  - platform: webhooks
    api_key: !secret telegram_api_key
    allowed_chat_ids:
      - !secret telegram_rubens_chat
      - !secret telegram_vale_chat
      - !secret telegram_catingham_palace_group

input_slider:
  green_room_rolling_shutter:
    name: Green room rolling shutter
    min: 0
    max: 100
    initial: 100
    step: 5
    unit_of_measurement: step  
    icon: mdi:blinds
  living_room_left_rolling_shutter:
    name: Living room left rolling shutter
    min: 0
    max: 100
    initial: 100
    step: 5
    unit_of_measurement: step  
    icon: mdi:blinds
  living_room_right_rolling_shutter:
    name: Living room right rolling shutter
    min: 0
    max: 100
    initial: 100
    step: 5
    unit_of_measurement: step  
    icon: mdi:blinds
  kitchen_left_rolling_shutter:
    name: Kitchen left rolling shutter
    min: 0
    max: 100
    initial: 100
    step: 5
    unit_of_measurement: step  
    icon: mdi:blinds
  kitchen_right_rolling_shutter:
    name: Kitchen right rolling shutter
    min: 0
    max: 100
    initial: 100
    step: 5
    unit_of_measurement: step  
    icon: mdi:blinds
  pink_room_rolling_shutter:
    name: Pink room rolling shutter
    min: 0
    max: 100
    initial: 100
    step: 5
    unit_of_measurement: step  
    icon: mdi:blinds
  bedroom_rolling_shutter:
    name: Bedroom rolling shutter
    min: 0
    max: 100
    initial: 100
    step: 5
    unit_of_measurement: step  
    icon: mdi:blinds
  bathroom_rolling_shutter:
    name: Bathroom rolling shutter
    min: 0
    max: 100
    initial: 100
    step: 5
    unit_of_measurement: step  
    icon: mdi:blinds
  cat_passage:
    name: Cat passage
    min: 0
    max: 100
    initial: 30
    step: 5
    unit_of_measurement: step  
    icon: mdi:cat
    

binary_sensor:
  - platform: mqtt
    state_topic: "catingham_palace/bedroom/bed/rubens"
    name: "Rubens bed"
    qos: 1
    payload_on: "IN"
    payload_off: "OUT"
    device_class: "occupancy"
  - platform: mqtt
    state_topic: "catingham_palace/bedroom/bed/valentina"
    name: "Valentina bed"
    qos: 1
    payload_on: "IN"
    payload_off: "OUT"
    device_class: "occupancy"
  - platform: mqtt
    state_topic: "catingham_palace/green_room/motion"
    name: "Green room motion"
    qos: 1
    device_class: "motion"

camera:
  - platform: mjpeg
    mjpeg_url: http://localhost:8081
    name: Green room camera

group: !include groups.yaml
automation: !include automations.yaml
